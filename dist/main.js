(()=>{"use strict";const e=document.querySelector("#task-form-container"),t=document.querySelector("#task-form-input"),o=document.querySelector("#tasks");let n="readonly";var l;l=e=>{console.log(e);let t=e.value,o=e.readonly,n=e.idNr;a(t,o,n),n==e.idN&&n++},fetch("http://localhost:8888/todolist").then((e=>e.json())).then((({tasksJson:e})=>{e.forEach(l)}));const a=function(e,l,a){const d=document.createElement("div");d.classList.add("task"),d.innerHTML=`\n        <div class="content">\n        <input \n            type="text" \n            class="text"\n            value="${e}"\n            readonly="${l}"\n            data-id=${a}\n            />\n        </div>                    \n        <div class="actions">\n            <button class="edit">Edit</button>\n            <button class="delete">Delete</button>\n        </div>\n        `,o.appendChild(d),t.value="";let s=d.querySelector(".edit"),i=d.querySelector(".delete"),r=d.querySelector(".text");s.addEventListener("click",(e=>{if("edit"==s.innerText.toLowerCase())r.removeAttribute("readonly"),s.innerText="Save";else{r.setAttribute("readonly","readonly"),s.innerText="Edit",console.log(r),console.log(r.readonly);let e={value:r.value,idNr:r.dataset.id,readonly:n};console.log(e),t=e,console.log(t),console.log(t.idNr),fetch(`http://localhost:8888/todolist/${t.idNr}`,{method:"PATCH",body:JSON.stringify(t),headers:{"Content-type":"application/json"}})}var t})),i.addEventListener("click",(()=>{o.removeChild(d),console.log(r.dataset.id),fetch(`http://localhost:8888/todolist/${r.dataset.id}`,{method:"DELETE"})}))};e.addEventListener("submit",(e=>{e.preventDefault();let o=t.value,l=n,d=Math.floor(Date.now()/100);var s;t.value?(a(o,l,d),s={value:o,idNr:d,readonly:l},fetch("http://localhost:8888/todolist",{method:"POST",body:JSON.stringify(s),headers:{"Content-type":"application/json"}})):alert("please fill out the task")}))})();