(()=>{"use strict";const e=document.querySelector("#task-form-container"),t=document.querySelector("#task-form-input"),o=document.querySelector("#tasks");let n="readonly";var a;a=e=>{console.log(e);let t=e.value,o=e.readonly,n=e.idNr;d(t,o,n),n==e.idN&&n++},fetch("https://apptodobackend101.herokuapp.com/todolist").then((e=>e.json())).then((({tasksJson:e})=>{e.forEach(a)}));const d=function(e,a,d){const l=document.createElement("div");l.classList.add("task"),l.innerHTML=`\n        <div class="content">\n        <input \n            type="text" \n            class="text"\n            value="${e}"\n            readonly="${a}"\n            data-id=${d}\n            />\n        </div>                    \n        <div class="actions">\n            <button class="edit">Edit</button>\n            <button class="delete">Delete</button>\n        </div>\n        `,o.appendChild(l),t.value="";let s=l.querySelector(".edit"),r=l.querySelector(".delete"),i=l.querySelector(".text");s.addEventListener("click",(e=>{if("edit"==s.innerText.toLowerCase())i.removeAttribute("readonly"),s.innerText="Save";else{i.setAttribute("readonly","readonly"),s.innerText="Edit",console.log(i),console.log(i.readonly);let e={value:i.value,idNr:i.dataset.id,readonly:n};console.log(e),t=e,console.log(t),console.log(t.idNr),fetch(`https://apptodobackend101.herokuapp.com/todolist/${t.idNr}`,{method:"PATCH",body:JSON.stringify(t),headers:{"Content-type":"application/json"}})}var t})),r.addEventListener("click",(()=>{o.removeChild(l),console.log(i.dataset.id),fetch(`https://apptodobackend101.herokuapp.com/todolist/${i.dataset.id}`,{method:"DELETE"})}))};e.addEventListener("submit",(e=>{e.preventDefault();let o=t.value,a=n,l=Math.floor(Date.now()/100);var s;t.value?(d(o,a,l),s={value:o,idNr:l,readonly:a},fetch("https://apptodobackend101.herokuapp.com/todolist",{method:"POST",body:JSON.stringify(s),headers:{"Content-type":"application/json"}})):alert("please fill out the task")}))})();